import * as Bowser from 'bowser';
import * as _ from 'lodash';
export class EsnUtils {
    static isString(s) {
        return (typeof (s) === 'string') || s instanceof String;
    }
    static cloneDeep(obj) {
        return JSON.parse(JSON.stringify(obj));
    }
    // Assign the errors of ctrl2 to ctrl1
    static assignErrors(ctrl1, ctrl2) {
        if (!ctrl2) {
            return;
        }
        const localErrs = ctrl1?.errors;
        const parentErrors = ctrl2.control?.errors;
        if (!!localErrs || !!parentErrors) {
            const errors = {};
            Object.assign(errors, localErrs || {}, parentErrors || {});
            ctrl1?.setErrors(errors);
        }
    }
    static generateRandomUuid() {
        let s4 = () => {
            return Math.floor((1 + Math.random()) * 0x10000)
                .toString(16)
                .substring(1);
        };
        return `${s4()}${s4()}-${s4()}-${s4()}-${s4()}-${s4()}${s4()}${s4()}`;
    }
    static async sleep(ms) {
        return new Promise((resolve) => setTimeout(resolve, ms));
    }
    static capitalize(str) {
        return str.charAt(0).toUpperCase() + str.slice(1);
    }
    static isBrowserSupported() {
        const browser = Bowser.getParser(window.navigator.userAgent);
        const isValidBrowser = Boolean(browser.satisfies({
            chrome: '>1',
            firefox: '>1',
            'Microsoft Edge': '>=79',
        }));
        const browserCapabilitiesOK = 'reversed' in document.createElement('ol') && // Edge before chromium
            'querySelector' in document &&
            'localStorage' in window &&
            'addEventListener' in window &&
            'IntersectionObserver' in window &&
            'indexedDB' in window &&
            'serviceWorker' in navigator &&
            'databases' in indexedDB;
        return isValidBrowser && browserCapabilitiesOK;
    }
    static pruneEmpty(obj) {
        return (function prune(current) {
            _.forOwn(current, function (value, key) {
                if (_.isUndefined(value) ||
                    _.isNull(value) ||
                    _.isNaN(value) ||
                    (_.isString(value) && _.isEmpty(value)) ||
                    (_.isObject(value) && _.isEmpty(prune(value)))) {
                    delete current[key];
                }
            });
            // remove any leftover undefined values from the delete
            // operation on an array
            if (_.isArray(current)) {
                _.pull(current, undefined);
            }
            return current;
        })(this.cloneDeep(obj)); // Do not modify the original object, create a clone instead
    }
}
EsnUtils.BREAKPOINTS = {
    mobile: '600px',
    smallMobile: '400px',
    tabletSmall: '800px',
    tabletLarge: '1024px',
};
//https://stackoverflow.com/questions/7616461/generate-a-hash-from-string-in-javascript
EsnUtils.hashCode = function (str) {
    var hash = 0, i, chr;
    if (str.length === 0)
        return hash;
    for (i = 0; i < str.length; i++) {
        chr = str.charCodeAt(i);
        hash = (hash << 5) - hash + chr;
        hash |= 0; // Convert to 32bit integer
    }
    return hash;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9hcm9tLWRvbWFpbi1pcG5uLWM5MC1kZXNpZ24tbGliL3NyYy9saWIvdXRpbHMvdXRpbHMvdXRpbHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxLQUFLLE1BQU0sTUFBTSxRQUFRLENBQUM7QUFDakMsT0FBTyxLQUFLLENBQUMsTUFBTSxRQUFRLENBQUM7QUFFNUIsTUFBTSxPQUFPLFFBQVE7SUFRWixNQUFNLENBQUMsUUFBUSxDQUFDLENBQU07UUFDM0IsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsS0FBSyxRQUFRLENBQUMsSUFBSSxDQUFDLFlBQVksTUFBTSxDQUFDO0lBQzFELENBQUM7SUFFTSxNQUFNLENBQUMsU0FBUyxDQUFDLEdBQVE7UUFDOUIsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUN6QyxDQUFDO0lBRUQsc0NBQXNDO0lBQy9CLE1BQU0sQ0FBQyxZQUFZLENBQUMsS0FBc0IsRUFBRSxLQUFnQjtRQUNqRSxJQUFJLENBQUMsS0FBSyxFQUFFO1lBQ1YsT0FBTztTQUNSO1FBQ0QsTUFBTSxTQUFTLEdBQUcsS0FBSyxFQUFFLE1BQU0sQ0FBQztRQUNoQyxNQUFNLFlBQVksR0FBRyxLQUFLLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQztRQUMzQyxJQUFJLENBQUMsQ0FBQyxTQUFTLElBQUksQ0FBQyxDQUFDLFlBQVksRUFBRTtZQUNqQyxNQUFNLE1BQU0sR0FBRyxFQUFFLENBQUM7WUFDbEIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsU0FBUyxJQUFJLEVBQUUsRUFBRSxZQUFZLElBQUksRUFBRSxDQUFDLENBQUM7WUFDM0QsS0FBSyxFQUFFLFNBQVMsQ0FBQyxNQUFPLENBQUMsQ0FBQztTQUMzQjtJQUNILENBQUM7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LENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsNERBQTREO0lBQ3ZGLENBQUM7O0FBeEdNLG9CQUFXLEdBQVE7SUFDeEIsTUFBTSxFQUFFLE9BQU87SUFDZixXQUFXLEVBQUUsT0FBTztJQUNwQixXQUFXLEVBQUUsT0FBTztJQUNwQixXQUFXLEVBQUUsUUFBUTtDQUN0QixDQUFDO0FBcUNGLHVGQUF1RjtBQUNoRixpQkFBUSxHQUFHLFVBQVUsR0FBVztJQUNyQyxJQUFJLElBQUksR0FBRyxDQUFDLEVBQ1YsQ0FBQyxFQUNELEdBQUcsQ0FBQztJQUNOLElBQUksR0FBRyxDQUFDLE1BQU0sS0FBSyxDQUFDO1FBQUUsT0FBTyxJQUFJLENBQUM7SUFDbEMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQy9CLEdBQUcsR0FBRyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3hCLElBQUksR0FBRyxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLEdBQUcsR0FBRyxDQUFDO1FBQ2hDLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQywyQkFBMkI7S0FDdkM7SUFDRCxPQUFPLElBQUksQ0FBQztBQUNkLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFic3RyYWN0Q29udHJvbCwgTmdDb250cm9sIH0gZnJvbSBcIkBhbmd1bGFyL2Zvcm1zXCI7XHJcbmltcG9ydCAqIGFzIEJvd3NlciBmcm9tICdib3dzZXInO1xyXG5pbXBvcnQgKiBhcyBfIGZyb20gJ2xvZGFzaCc7XHJcblxyXG5leHBvcnQgY2xhc3MgRXNuVXRpbHMge1xyXG4gIHN0YXRpYyBCUkVBS1BPSU5UUzogYW55ID0ge1xyXG4gICAgbW9iaWxlOiAnNjAwcHgnLFxyXG4gICAgc21hbGxNb2JpbGU6ICc0MDBweCcsXHJcbiAgICB0YWJsZXRTbWFsbDogJzgwMHB4JyxcclxuICAgIHRhYmxldExhcmdlOiAnMTAyNHB4JyxcclxuICB9O1xyXG5cclxuICBwdWJsaWMgc3RhdGljIGlzU3RyaW5nKHM6IGFueSkge1xyXG4gICAgcmV0dXJuICh0eXBlb2YgKHMpID09PSAnc3RyaW5nJykgfHwgcyBpbnN0YW5jZW9mIFN0cmluZztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgY2xvbmVEZWVwKG9iajogYW55KXtcclxuICAgIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpO1xyXG4gIH1cclxuXHJcbiAgLy8gQXNzaWduIHRoZSBlcnJvcnMgb2YgY3RybDIgdG8gY3RybDFcclxuICBwdWJsaWMgc3RhdGljIGFzc2lnbkVycm9ycyhjdHJsMTogQWJzdHJhY3RDb250cm9sLCBjdHJsMjogTmdDb250cm9sKXtcclxuICAgIGlmICghY3RybDIpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbG9jYWxFcnJzID0gY3RybDE/LmVycm9ycztcclxuICAgIGNvbnN0IHBhcmVudEVycm9ycyA9IGN0cmwyLmNvbnRyb2w/LmVycm9ycztcclxuICAgIGlmICghIWxvY2FsRXJycyB8fCAhIXBhcmVudEVycm9ycykge1xyXG4gICAgICBjb25zdCBlcnJvcnMgPSB7fTtcclxuICAgICAgT2JqZWN0LmFzc2lnbihlcnJvcnMsIGxvY2FsRXJycyB8fCB7fSwgcGFyZW50RXJyb3JzIHx8IHt9KTtcclxuICAgICAgY3RybDE/LnNldEVycm9ycyhlcnJvcnMhKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgZ2VuZXJhdGVSYW5kb21VdWlkKCk6IHN0cmluZyB7XHJcbiAgICBsZXQgczQgPSAoKSA9PiB7XHJcbiAgICAgIHJldHVybiBNYXRoLmZsb29yKCgxICsgTWF0aC5yYW5kb20oKSkgKiAweDEwMDAwKVxyXG4gICAgICAgIC50b1N0cmluZygxNilcclxuICAgICAgICAuc3Vic3RyaW5nKDEpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBgJHtzNCgpfSR7czQoKX0tJHtzNCgpfS0ke3M0KCl9LSR7czQoKX0tJHtzNCgpfSR7czQoKX0ke3M0KCl9YDtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBhc3luYyBzbGVlcChtczogbnVtYmVyKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcclxuICB9XHJcblxyXG4gIC8vaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNzYxNjQ2MS9nZW5lcmF0ZS1hLWhhc2gtZnJvbS1zdHJpbmctaW4tamF2YXNjcmlwdFxyXG4gIHN0YXRpYyBoYXNoQ29kZSA9IGZ1bmN0aW9uIChzdHI6IHN0cmluZykge1xyXG4gICAgdmFyIGhhc2ggPSAwLFxyXG4gICAgICBpLFxyXG4gICAgICBjaHI7XHJcbiAgICBpZiAoc3RyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGhhc2g7XHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNociA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICBoYXNoID0gKGhhc2ggPDwgNSkgLSBoYXNoICsgY2hyO1xyXG4gICAgICBoYXNoIHw9IDA7IC8vIENvbnZlcnQgdG8gMzJiaXQgaW50ZWdlclxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGhhc2g7XHJcbiAgfTtcclxuXHJcbiAgc3RhdGljIGNhcGl0YWxpemUoc3RyOiBzdHJpbmcpIHtcclxuICAgIHJldHVybiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgaXNCcm93c2VyU3VwcG9ydGVkKCk6IGJvb2xlYW4ge1xyXG4gICAgY29uc3QgYnJvd3NlciA9IEJvd3Nlci5nZXRQYXJzZXIod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG5cclxuICAgIGNvbnN0IGlzVmFsaWRCcm93c2VyID0gQm9vbGVhbihcclxuICAgICAgYnJvd3Nlci5zYXRpc2ZpZXMoe1xyXG4gICAgICAgIGNocm9tZTogJz4xJyxcclxuICAgICAgICBmaXJlZm94OiAnPjEnLFxyXG4gICAgICAgICdNaWNyb3NvZnQgRWRnZSc6ICc+PTc5JyxcclxuICAgICAgfSlcclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgYnJvd3NlckNhcGFiaWxpdGllc09LID1cclxuICAgICAgJ3JldmVyc2VkJyBpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvbCcpICYmIC8vIEVkZ2UgYmVmb3JlIGNocm9taXVtXHJcbiAgICAgICdxdWVyeVNlbGVjdG9yJyBpbiBkb2N1bWVudCAmJlxyXG4gICAgICAnbG9jYWxTdG9yYWdlJyBpbiB3aW5kb3cgJiZcclxuICAgICAgJ2FkZEV2ZW50TGlzdGVuZXInIGluIHdpbmRvdyAmJlxyXG4gICAgICAnSW50ZXJzZWN0aW9uT2JzZXJ2ZXInIGluIHdpbmRvdyAmJlxyXG4gICAgICAnaW5kZXhlZERCJyBpbiB3aW5kb3cgJiZcclxuICAgICAgJ3NlcnZpY2VXb3JrZXInIGluIG5hdmlnYXRvciAmJlxyXG4gICAgICAnZGF0YWJhc2VzJyBpbiBpbmRleGVkREI7XHJcbiAgICByZXR1cm4gaXNWYWxpZEJyb3dzZXIgJiYgYnJvd3NlckNhcGFiaWxpdGllc09LO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHBydW5lRW1wdHkob2JqOiBhbnkpIHtcclxuICAgIHJldHVybiAoZnVuY3Rpb24gcHJ1bmUoY3VycmVudCkge1xyXG4gICAgICBfLmZvck93bihjdXJyZW50LCBmdW5jdGlvbiAodmFsdWU6IGFueSwga2V5OiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBfLmlzVW5kZWZpbmVkKHZhbHVlKSB8fFxyXG4gICAgICAgICAgXy5pc051bGwodmFsdWUpIHx8XHJcbiAgICAgICAgICBfLmlzTmFOKHZhbHVlKSB8fFxyXG4gICAgICAgICAgKF8uaXNTdHJpbmcodmFsdWUpICYmIF8uaXNFbXB0eSh2YWx1ZSkpIHx8XHJcbiAgICAgICAgICAoXy5pc09iamVjdCh2YWx1ZSkgJiYgXy5pc0VtcHR5KHBydW5lKHZhbHVlKSkpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBkZWxldGUgY3VycmVudFtrZXldO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIC8vIHJlbW92ZSBhbnkgbGVmdG92ZXIgdW5kZWZpbmVkIHZhbHVlcyBmcm9tIHRoZSBkZWxldGVcclxuICAgICAgLy8gb3BlcmF0aW9uIG9uIGFuIGFycmF5XHJcbiAgICAgIGlmIChfLmlzQXJyYXkoY3VycmVudCkpIHtcclxuICAgICAgICBfLnB1bGwoY3VycmVudCwgdW5kZWZpbmVkKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIGN1cnJlbnQ7XHJcbiAgICB9KSh0aGlzLmNsb25lRGVlcChvYmopKTsgLy8gRG8gbm90IG1vZGlmeSB0aGUgb3JpZ2luYWwgb2JqZWN0LCBjcmVhdGUgYSBjbG9uZSBpbnN0ZWFkXHJcbiAgfVxyXG5cclxuXHJcbn1cclxuIl19